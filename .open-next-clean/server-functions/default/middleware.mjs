
import {Buffer} from "node:buffer";
globalThis.Buffer = Buffer;

import {AsyncLocalStorage} from "node:async_hooks";
globalThis.AsyncLocalStorage = AsyncLocalStorage;


const defaultDefineProperty = Object.defineProperty;
Object.defineProperty = function(o, p, a) {
  if(p=== '__import_unsupported' && Boolean(globalThis.__import_unsupported)) {
    return;
  }
  return defaultDefineProperty(o, p, a);
};

  
  const require = (await import("node:module")).createRequire(import.meta.url);
  const __filename = (await import("node:url")).fileURLToPath(import.meta.url);
  const __dirname = (await import("node:path")).dirname(__filename);
  
  
  globalThis.openNextDebug = false;globalThis.openNextVersion = "3.8.5";
var kt=Object.defineProperty;var et=(t,e)=>()=>(t&&(e=t(t=0)),e);var St=(t,e)=>{for(var r in e)kt(t,r,{get:e[r],enumerable:!0})};function rt(t,e){return(e?/^[\x00-\xFF]*$/:/^[\x00-\x7F]*$/).test(t)}function M(t,e=!1){let r=[],i=0;for(;i<t.length;){let p=t[i],l=n(function(o){if(!e)throw new TypeError(o);r.push({type:"INVALID_CHAR",index:i,value:t[i++]})},"ErrorOrInvalid");if(p==="*"){r.push({type:"ASTERISK",index:i,value:t[i++]});continue}if(p==="+"||p==="?"){r.push({type:"OTHER_MODIFIER",index:i,value:t[i++]});continue}if(p==="\\"){r.push({type:"ESCAPED_CHAR",index:i++,value:t[i++]});continue}if(p==="{"){r.push({type:"OPEN",index:i,value:t[i++]});continue}if(p==="}"){r.push({type:"CLOSE",index:i,value:t[i++]});continue}if(p===":"){let o="",s=i+1;for(;s<t.length;){let h=t.substr(s,1);if(s===i+1&&Ut.test(h)||s!==i+1&&At.test(h)){o+=t[s++];continue}break}if(!o){l(`Missing parameter name at ${i}`);continue}r.push({type:"NAME",index:i,value:o}),i=s;continue}if(p==="("){let o=1,s="",h=i+1,a=!1;if(t[h]==="?"){l(`Pattern cannot start with "?" at ${h}`);continue}for(;h<t.length;){if(!rt(t[h],!1)){l(`Invalid character '${t[h]}' at ${h}.`),a=!0;break}if(t[h]==="\\"){s+=t[h++]+t[h++];continue}if(t[h]===")"){if(o--,o===0){h++;break}}else if(t[h]==="("&&(o++,t[h+1]!=="?")){l(`Capturing groups are not allowed at ${h}`),a=!0;break}s+=t[h++]}if(a)continue;if(o){l(`Unbalanced pattern at ${i}`);continue}if(!s){l(`Missing pattern at ${i}`);continue}r.push({type:"REGEX",index:i,value:s}),i=h;continue}r.push({type:"CHAR",index:i,value:t[i++]})}return r.push({type:"END",index:i,value:""}),r}function z(t,e={}){let r=M(t);e.delimiter??="/#?",e.prefixes??="./";let i=`[^${d(e.delimiter)}]+?`,p=[],l=0,o=0,s="",h=new Set,a=n(u=>{if(o<r.length&&r[o].type===u)return r[o++].value},"tryConsume"),f=n(()=>a("OTHER_MODIFIER")??a("ASTERISK"),"tryConsumeModifier"),b=n(u=>{let c=a(u);if(c!==void 0)return c;let{type:m,index:T}=r[o];throw new TypeError(`Unexpected ${m} at ${T}, expected ${u}`)},"mustConsume"),C=n(()=>{let u="",c;for(;c=a("CHAR")??a("ESCAPED_CHAR");)u+=c;return u},"consumeText"),Pt=n(u=>u,"DefaultEncodePart"),U=e.encodePart||Pt,A="",_=n(u=>{A+=u},"appendToPendingFixedValue"),D=n(()=>{A.length&&(p.push(new S(3,"","",U(A),"",3)),A="")},"maybeAddPartFromPendingFixedValue"),tt=n((u,c,m,T,x)=>{let y=3;switch(x){case"?":y=1;break;case"*":y=0;break;case"+":y=2;break}if(!c&&!m&&y===3){_(u);return}if(D(),!c&&!m){if(!u)return;p.push(new S(3,"","",U(u),"",y));return}let g;m?m==="*"?g=H:g=m:g=i;let L=2;g===i?(L=1,g=""):g===H&&(L=0,g="");let v;if(c?v=c:m&&(v=l++),h.has(v))throw new TypeError(`Duplicate name '${v}'.`);h.add(v),p.push(new S(L,v,U(u),g,U(T),y))},"addPart");for(;o<r.length;){let u=a("CHAR"),c=a("NAME"),m=a("REGEX");if(!c&&!m&&(m=a("ASTERISK")),c||m){let x=u??"";e.prefixes.indexOf(x)===-1&&(_(x),x=""),D();let y=f();tt(x,c,m,"",y);continue}let T=u??a("ESCAPED_CHAR");if(T){_(T);continue}if(a("OPEN")){let x=C(),y=a("NAME"),g=a("REGEX");!y&&!g&&(g=a("ASTERISK"));let L=C();b("CLOSE");let v=f();tt(x,y,g,L,v);continue}D(),b("END")}return p}function d(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function j(t){return t&&t.ignoreCase?"ui":"u"}function st(t,e,r){return K(z(t,r),e,r)}function $(t){switch(t){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function K(t,e,r={}){r.delimiter??="/#?",r.prefixes??="./",r.sensitive??=!1,r.strict??=!1,r.end??=!0,r.start??=!0,r.endsWith="";let i=r.start?"^":"";for(let s of t){if(s.type===3){s.modifier===3?i+=d(s.value):i+=`(?:${d(s.value)})${$(s.modifier)}`;continue}e&&e.push(s.name);let h=`[^${d(r.delimiter)}]+?`,a=s.value;if(s.type===1?a=h:s.type===0&&(a=H),!s.prefix.length&&!s.suffix.length){s.modifier===3||s.modifier===1?i+=`(${a})${$(s.modifier)}`:i+=`((?:${a})${$(s.modifier)})`;continue}if(s.modifier===3||s.modifier===1){i+=`(?:${d(s.prefix)}(${a})${d(s.suffix)})`,i+=$(s.modifier);continue}i+=`(?:${d(s.prefix)}`,i+=`((?:${a})(?:`,i+=d(s.suffix),i+=d(s.prefix),i+=`(?:${a}))*)${d(s.suffix)})`,s.modifier===0&&(i+="?")}let p=`[${d(r.endsWith)}]|$`,l=`[${d(r.delimiter)}]`;if(r.end)return r.strict||(i+=`${l}?`),r.endsWith.length?i+=`(?=${p})`:i+="$",new RegExp(i,j(r));r.strict||(i+=`(?:${l}(?=${p}))?`);let o=!1;if(t.length){let s=t[t.length-1];s.type===3&&s.modifier===3&&(o=r.delimiter.indexOf(s)>-1)}return o||(i+=`(?=${l}|${p})`),new RegExp(i,j(r))}function it(t,e){return t.length?t[0]==="/"?!0:!e||t.length<2?!1:(t[0]=="\\"||t[0]=="{")&&t[1]=="/":!1}function W(t,e){return t.startsWith(e)?t.substring(e.length,t.length):t}function nt(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t}function G(t){return!t||t.length<2?!1:t[0]==="["||(t[0]==="\\"||t[0]==="{")&&t[1]==="["}function V(t){if(!t)return!0;for(let e of at)if(t.test(e))return!0;return!1}function ot(t,e){if(t=W(t,"#"),e||t==="")return t;let r=new URL("https://example.com");return r.hash=t,r.hash?r.hash.substring(1,r.hash.length):""}function ht(t,e){if(t=W(t,"?"),e||t==="")return t;let r=new URL("https://example.com");return r.search=t,r.search?r.search.substring(1,r.search.length):""}function pt(t,e){return e||t===""?t:G(t)?q(t):B(t)}function lt(t,e){if(e||t==="")return t;let r=new URL("https://example.com");return r.password=t,r.password}function ut(t,e){if(e||t==="")return t;let r=new URL("https://example.com");return r.username=t,r.username}function ct(t,e,r){if(r||t==="")return t;if(e&&!at.includes(e))return new URL(`${e}:${t}`).pathname;let i=t[0]=="/";return t=new URL(i?t:"/-"+t,"https://example.com").pathname,i||(t=t.substring(2,t.length)),t}function ft(t,e,r){return X(e)===t&&(t=""),r||t===""?t:J(t)}function mt(t,e){return t=nt(t,":"),e||t===""?t:I(t)}function X(t){switch(t){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function I(t){if(t==="")return t;if(/^[-+.A-Za-z0-9]*$/.test(t))return t.toLowerCase();throw new TypeError(`Invalid protocol '${t}'.`)}function dt(t){if(t==="")return t;let e=new URL("https://example.com");return e.username=t,e.username}function gt(t){if(t==="")return t;let e=new URL("https://example.com");return e.password=t,e.password}function B(t){if(t==="")return t;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(t))throw new TypeError(`Invalid hostname '${t}'`);let e=new URL("https://example.com");return e.hostname=t,e.hostname}function q(t){if(t==="")return t;if(/[^0-9a-fA-F[\]:]/g.test(t))throw new TypeError(`Invalid IPv6 hostname '${t}'`);return t.toLowerCase()}function J(t){if(t===""||/^[0-9]*$/.test(t)&&parseInt(t)<=65535)return t;throw new TypeError(`Invalid port '${t}'.`)}function yt(t){if(t==="")return t;let e=new URL("https://example.com");return e.pathname=t[0]!=="/"?"/-"+t:t,t[0]!=="/"?e.pathname.substring(2,e.pathname.length):e.pathname}function bt(t){return t===""?t:new URL(`data:${t}`).pathname}function wt(t){if(t==="")return t;let e=new URL("https://example.com");return e.search=t,e.search.substring(1,e.search.length)}function xt(t){if(t==="")return t;let e=new URL("https://example.com");return e.hash=t,e.hash.substring(1,e.hash.length)}function F(t,e){if(typeof t!="string")throw new TypeError("parameter 1 is not of type 'string'.");let r=new URL(t,e);return{protocol:r.protocol.substring(0,r.protocol.length-1),username:r.username,password:r.password,hostname:r.hostname,port:r.port,pathname:r.pathname,search:r.search!==""?r.search.substring(1,r.search.length):void 0,hash:r.hash!==""?r.hash.substring(1,r.hash.length):void 0}}function w(t,e){return e?k(t):t}function P(t,e,r){let i;if(typeof e.baseURL=="string")try{i=new URL(e.baseURL),e.protocol===void 0&&(t.protocol=w(i.protocol.substring(0,i.protocol.length-1),r)),!r&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&(t.username=w(i.username,r)),!r&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&e.password===void 0&&(t.password=w(i.password,r)),e.protocol===void 0&&e.hostname===void 0&&(t.hostname=w(i.hostname,r)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&(t.port=w(i.port,r)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&(t.pathname=w(i.pathname,r)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&(t.search=w(i.search.substring(1,i.search.length),r)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&e.hash===void 0&&(t.hash=w(i.hash.substring(1,i.hash.length),r))}catch{throw new TypeError(`invalid baseURL '${e.baseURL}'.`)}if(typeof e.protocol=="string"&&(t.protocol=mt(e.protocol,r)),typeof e.username=="string"&&(t.username=ut(e.username,r)),typeof e.password=="string"&&(t.password=lt(e.password,r)),typeof e.hostname=="string"&&(t.hostname=pt(e.hostname,r)),typeof e.port=="string"&&(t.port=ft(e.port,t.protocol,r)),typeof e.pathname=="string"){if(t.pathname=e.pathname,i&&!it(t.pathname,r)){let p=i.pathname.lastIndexOf("/");p>=0&&(t.pathname=w(i.pathname.substring(0,p+1),r)+t.pathname)}t.pathname=ct(t.pathname,t.protocol,r)}return typeof e.search=="string"&&(t.search=ht(e.search,r)),typeof e.hash=="string"&&(t.hash=ot(e.hash,r)),t}function k(t){return t.replace(/([+*?:{}()\\])/g,"\\$1")}function Et(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function Rt(t,e){e.delimiter??="/#?",e.prefixes??="./",e.sensitive??=!1,e.strict??=!1,e.end??=!0,e.start??=!0,e.endsWith="";let r=".*",i=`[^${Et(e.delimiter)}]+?`,p=/[$_\u200C\u200D\p{ID_Continue}]/u,l="";for(let o=0;o<t.length;++o){let s=t[o];if(s.type===3){if(s.modifier===3){l+=k(s.value);continue}l+=`{${k(s.value)}}${$(s.modifier)}`;continue}let h=s.hasCustomName(),a=!!s.suffix.length||!!s.prefix.length&&(s.prefix.length!==1||!e.prefixes.includes(s.prefix)),f=o>0?t[o-1]:null,b=o<t.length-1?t[o+1]:null;if(!a&&h&&s.type===1&&s.modifier===3&&b&&!b.prefix.length&&!b.suffix.length)if(b.type===3){let C=b.value.length>0?b.value[0]:"";a=p.test(C)}else a=!b.hasCustomName();if(!a&&!s.prefix.length&&f&&f.type===3){let C=f.value[f.value.length-1];a=e.prefixes.includes(C)}a&&(l+="{"),l+=k(s.prefix),h&&(l+=`:${s.name}`),s.type===2?l+=`(${s.value})`:s.type===1?h||(l+=`(${i})`):s.type===0&&(!h&&(!f||f.type===3||f.modifier!==3||a||s.prefix!=="")?l+="*":l+=`(${r})`),s.type===1&&h&&s.suffix.length&&p.test(s.suffix[0])&&(l+="\\"),l+=k(s.suffix),a&&(l+="}"),s.modifier!==3&&(l+=$(s.modifier))}return l}var Lt,n,S,Ut,At,H,R,It,Ot,at,vt,N,E,O,$t=et(()=>{Lt=Object.defineProperty,n=(t,e)=>Lt(t,"name",{value:e,configurable:!0}),S=class{type=3;name="";prefix="";value="";suffix="";modifier=3;constructor(t,e,r,i,p,l){this.type=t,this.name=e,this.prefix=r,this.value=i,this.suffix=p,this.modifier=l}hasCustomName(){return this.name!==""&&typeof this.name!="number"}};n(S,"Part");Ut=/[$_\p{ID_Start}]/u,At=/[$_\u200C\u200D\p{ID_Continue}]/u,H=".*";n(rt,"isASCII");n(M,"lexer");n(z,"parse");n(d,"escapeString");n(j,"flags");n(st,"stringToRegexp");n($,"modifierToString");n(K,"partsToRegexp");R={delimiter:"",prefixes:"",sensitive:!0,strict:!0},It={delimiter:".",prefixes:"",sensitive:!0,strict:!0},Ot={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};n(it,"isAbsolutePathname");n(W,"maybeStripPrefix");n(nt,"maybeStripSuffix");n(G,"treatAsIPv6Hostname");at=["ftp","file","http","https","ws","wss"];n(V,"isSpecialScheme");n(ot,"canonicalizeHash");n(ht,"canonicalizeSearch");n(pt,"canonicalizeHostname");n(lt,"canonicalizePassword");n(ut,"canonicalizeUsername");n(ct,"canonicalizePathname");n(ft,"canonicalizePort");n(mt,"canonicalizeProtocol");n(X,"defaultPortForProtocol");n(I,"protocolEncodeCallback");n(dt,"usernameEncodeCallback");n(gt,"passwordEncodeCallback");n(B,"hostnameEncodeCallback");n(q,"ipv6HostnameEncodeCallback");n(J,"portEncodeCallback");n(yt,"standardURLPathnameEncodeCallback");n(bt,"pathURLPathnameEncodeCallback");n(wt,"searchEncodeCallback");n(xt,"hashEncodeCallback");vt=class{#n;#s=[];#e={};#t=0;#i=1;#p=0;#o=0;#f=0;#m=0;#d=!1;constructor(t){this.#n=t}get result(){return this.#e}parse(){for(this.#s=M(this.#n,!0);this.#t<this.#s.length;this.#t+=this.#i){if(this.#i=1,this.#s[this.#t].type==="END"){if(this.#o===0){this.#w(),this.#l()?this.#r(9,1):this.#u()?this.#r(8,1):this.#r(7,0);continue}else if(this.#o===2){this.#c(5);continue}this.#r(10,0);break}if(this.#f>0)if(this.#T())this.#f-=1;else continue;if(this.#C()){this.#f+=1;continue}switch(this.#o){case 0:this.#x()&&this.#c(1);break;case 1:if(this.#x()){this.#S();let t=7,e=1;this.#E()?(t=2,e=3):this.#d&&(t=2),this.#r(t,e)}break;case 2:this.#y()?this.#c(3):(this.#b()||this.#u()||this.#l())&&this.#c(5);break;case 3:this.#R()?this.#r(4,1):this.#y()&&this.#r(5,1);break;case 4:this.#y()&&this.#r(5,1);break;case 5:this.#P()?this.#m+=1:this.#k()&&(this.#m-=1),this.#$()&&!this.#m?this.#r(6,1):this.#b()?this.#r(7,0):this.#u()?this.#r(8,1):this.#l()&&this.#r(9,1);break;case 6:this.#b()?this.#r(7,0):this.#u()?this.#r(8,1):this.#l()&&this.#r(9,1);break;case 7:this.#u()?this.#r(8,1):this.#l()&&this.#r(9,1);break;case 8:this.#l()&&this.#r(9,1);break;case 9:break;case 10:break}}this.#e.hostname!==void 0&&this.#e.port===void 0&&(this.#e.port="")}#r(t,e){switch(this.#o){case 0:break;case 1:this.#e.protocol=this.#h();break;case 2:break;case 3:this.#e.username=this.#h();break;case 4:this.#e.password=this.#h();break;case 5:this.#e.hostname=this.#h();break;case 6:this.#e.port=this.#h();break;case 7:this.#e.pathname=this.#h();break;case 8:this.#e.search=this.#h();break;case 9:this.#e.hash=this.#h();break;case 10:break}this.#o!==0&&t!==10&&([1,2,3,4].includes(this.#o)&&[6,7,8,9].includes(t)&&(this.#e.hostname??=""),[1,2,3,4,5,6].includes(this.#o)&&[8,9].includes(t)&&(this.#e.pathname??=this.#d?"/":""),[1,2,3,4,5,6,7].includes(this.#o)&&t===9&&(this.#e.search??="")),this.#v(t,e)}#v(t,e){this.#o=t,this.#p=this.#t+e,this.#t+=e,this.#i=0}#w(){this.#t=this.#p,this.#i=0}#c(t){this.#w(),this.#o=t}#g(t){return t<0&&(t=this.#s.length-t),t<this.#s.length?this.#s[t]:this.#s[this.#s.length-1]}#a(t,e){let r=this.#g(t);return r.value===e&&(r.type==="CHAR"||r.type==="ESCAPED_CHAR"||r.type==="INVALID_CHAR")}#x(){return this.#a(this.#t,":")}#E(){return this.#a(this.#t+1,"/")&&this.#a(this.#t+2,"/")}#y(){return this.#a(this.#t,"@")}#R(){return this.#a(this.#t,":")}#$(){return this.#a(this.#t,":")}#b(){return this.#a(this.#t,"/")}#u(){if(this.#a(this.#t,"?"))return!0;if(this.#s[this.#t].value!=="?")return!1;let t=this.#g(this.#t-1);return t.type!=="NAME"&&t.type!=="REGEX"&&t.type!=="CLOSE"&&t.type!=="ASTERISK"}#l(){return this.#a(this.#t,"#")}#C(){return this.#s[this.#t].type=="OPEN"}#T(){return this.#s[this.#t].type=="CLOSE"}#P(){return this.#a(this.#t,"[")}#k(){return this.#a(this.#t,"]")}#h(){let t=this.#s[this.#t],e=this.#g(this.#p).index;return this.#n.substring(e,t.index)}#S(){let t={};Object.assign(t,R),t.encodePart=I;let e=st(this.#h(),void 0,t);this.#d=V(e)}};n(vt,"Parser");N=["protocol","username","password","hostname","port","pathname","search","hash"],E="*";n(F,"extractValues");n(w,"processBaseURLString");n(P,"applyInit");n(k,"escapePatternString");n(Et,"escapeRegexpString");n(Rt,"partsToPattern");O=class{#n;#s={};#e={};#t={};#i={};#p=!1;constructor(t={},e,r){try{let i;if(typeof e=="string"?i=e:r=e,typeof t=="string"){let s=new vt(t);if(s.parse(),t=s.result,i===void 0&&typeof t.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");t.baseURL=i}else{if(!t||typeof t!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(i)throw new TypeError("parameter 1 is not of type 'string'.")}typeof r>"u"&&(r={ignoreCase:!1});let p={ignoreCase:r.ignoreCase===!0},l={pathname:E,protocol:E,username:E,password:E,hostname:E,port:E,search:E,hash:E};this.#n=P(l,t,!0),X(this.#n.protocol)===this.#n.port&&(this.#n.port="");let o;for(o of N){if(!(o in this.#n))continue;let s={},h=this.#n[o];switch(this.#e[o]=[],o){case"protocol":Object.assign(s,R),s.encodePart=I;break;case"username":Object.assign(s,R),s.encodePart=dt;break;case"password":Object.assign(s,R),s.encodePart=gt;break;case"hostname":Object.assign(s,It),G(h)?s.encodePart=q:s.encodePart=B;break;case"port":Object.assign(s,R),s.encodePart=J;break;case"pathname":V(this.#s.protocol)?(Object.assign(s,Ot,p),s.encodePart=yt):(Object.assign(s,R,p),s.encodePart=bt);break;case"search":Object.assign(s,R,p),s.encodePart=wt;break;case"hash":Object.assign(s,R,p),s.encodePart=xt;break}try{this.#i[o]=z(h,s),this.#s[o]=K(this.#i[o],this.#e[o],s),this.#t[o]=Rt(this.#i[o],s),this.#p=this.#p||this.#i[o].some(a=>a.type===2)}catch{throw new TypeError(`invalid ${o} pattern '${this.#n[o]}'.`)}}}catch(i){throw new TypeError(`Failed to construct 'URLPattern': ${i.message}`)}}get[Symbol.toStringTag](){return"URLPattern"}test(t={},e){let r={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return!1;try{typeof t=="object"?r=P(r,t,!1):r=P(r,F(t,e),!1)}catch{return!1}let i;for(i of N)if(!this.#s[i].exec(r[i]))return!1;return!0}exec(t={},e){let r={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return;try{typeof t=="object"?r=P(r,t,!1):r=P(r,F(t,e),!1)}catch{return null}let i={};e?i.inputs=[t,e]:i.inputs=[t];let p;for(p of N){let l=this.#s[p].exec(r[p]);if(!l)return null;let o={};for(let[s,h]of this.#e[p].entries())if(typeof h=="string"||typeof h=="number"){let a=l[s+1];o[h]=a}i[p]={input:r[p]??"",groups:o}}return i}static compareComponent(t,e,r){let i=n((s,h)=>{for(let a of["type","modifier","prefix","value","suffix"]){if(s[a]<h[a])return-1;if(s[a]!==h[a])return 1}return 0},"comparePart"),p=new S(3,"","","","",3),l=new S(0,"","","","",3),o=n((s,h)=>{let a=0;for(;a<Math.min(s.length,h.length);++a){let f=i(s[a],h[a]);if(f)return f}return s.length===h.length?0:i(s[a]??p,h[a]??p)},"comparePartList");return!e.#t[t]&&!r.#t[t]?0:e.#t[t]&&!r.#t[t]?o(e.#i[t],[l]):!e.#t[t]&&r.#t[t]?o([l],r.#i[t]):o(e.#i[t],r.#i[t])}get protocol(){return this.#t.protocol}get username(){return this.#t.username}get password(){return this.#t.password}get hostname(){return this.#t.hostname}get port(){return this.#t.port}get pathname(){return this.#t.pathname}get search(){return this.#t.search}get hash(){return this.#t.hash}get hasRegExpGroups(){return this.#p}};n(O,"URLPattern")});var Ct={};St(Ct,{URLPattern:()=>O});var Tt=et(()=>{$t();globalThis.URLPattern||(globalThis.URLPattern=O)});import"node:fs";import"node:path";import{webcrypto as Z}from"node:crypto";globalThis._ENTRIES={};globalThis.self=globalThis;globalThis._ROUTES=[];function _t(t){return typeof t>"u"||typeof t=="object"&&t.duplex===void 0?{duplex:"half",...t}:t}var Q=class extends Request{constructor(e,r){super(e,_t(r))}};globalThis.Request=Q;globalThis.crypto||(globalThis.crypto=new Z.Crypto);globalThis.CryptoKey||(globalThis.CryptoKey=Z.CryptoKey);function Y(){if(!(this instanceof Y))return new Y;throw TypeError("Illegal constructor")}globalThis.SubtleCrypto||(globalThis.SubtleCrypto=Y);globalThis.Crypto||(globalThis.Crypto=Z.Crypto);globalThis.URLPattern||await Promise.resolve().then(()=>(Tt(),Ct));async function Dt(t){let e=new URL(t.url).pathname,i=globalThis._ROUTES.find(s=>s.regex.some(h=>new RegExp(h).test(e)));if(!i)throw new Error(`No route found for ${t.url}`);let l=await(await self._ENTRIES[`middleware_${i.name}`]).default({page:i.page,request:{...t,page:{name:i.name}}});return globalThis.__openNextAls.getStore()?.pendingPromiseRunner.add(l.waitUntil),l.response}export{Dt as default};
